paths:
  data: data/historical_btc.parquet
  checkpoints_dir: models/checkpoints
  best_policy: models/checkpoints/best_policy.pt
  best_rl_policy: models/checkpoints/best_rl_policy.pt
  log_dir: logs
  replay_buffer: data/replay_buffer.parquet

data_source:
  exchange_id: bitstamp       # binance | bybit | okx ...
  fallback_exchanges: []   # optional list for retries
  symbol: BTC/USDT         # ccxt symbol format
  timeframe: 1m
  start_iso: 2024-01-01T00:00:00Z
  max_bars: 500000
  auto_download_on_missing: true
  allow_synthetic_fallback: false

model:
  input_dim: 15        # inferred from data/features when training or first live candle
  hidden_sizes: [128, 64, 32]
  activation: relu
  action_space: discrete  # discrete|continuous

offline_training:
  epochs: 50
  batch_size: 1024
  learning_rate: 0.0003
  weight_decay: 0.00005
  train_split: 0.8
  val_split: 0.1
  test_split: 0.1
  seed: 42

online_training:
  learning_rate: 0.00001
  weight_decay: 0.0
  batch_size: 64
  update_every: 100
  max_buffer_size: 200000
  weight_anchor_coef: 0.01

paper_trading:
  fee_taker: 0.0004
  fee_maker: 0.0002
  starting_balance: 10000
  max_position_size: 1.0     # fraction of equity
  slippage_bps: 1.0

live_feed:
  source: binance           # binance|simulate
  symbol: BTCUSDT
  interval: 1m
  rest_poll_seconds: 60
  websocket_url: wss://fstream.binance.com/ws

llm:
  model: gpt-4.1-mini
  temperature: 0.2
  max_tokens: 400
  enable: false

strategy:
  type: rl                  # rl | rule_based
  rule_based:
    fast_idx: 0             # feature index for fast signal (e.g., short EMA/logret)
    slow_idx: 1             # feature index for slow signal
    threshold: 0.0

execution:
  mode: paper               # paper | binance_testnet | binance_live
  symbol: BTCUSDT
  leverage: 1

risk:
  max_daily_loss_pct: 0.05
  max_leverage: 2.0
  max_position_notional_pct: 1.0
  cooldown_minutes: 60
  drawdown_stop_pct: 0.15

rl:
  algo: ppo
  device: cuda
  total_timesteps: 3000000
  rollout_length: 1024
  batch_size: 128
  gamma: 0.995
  gae_lambda: 0.95
  clip_ratio: 0.15
  actor_lr: 0.0001
  critic_lr: 0.0004
  value_coef: 0.5
  entropy_coef: 0.05
  max_grad_norm: 0.5
  reward_scale: 1.0
  max_steps_per_episode: 10000
  initial_equity: 1000.0
  fee_rate: 0.0004
  slippage: 0.0002
  min_equity: 1.0
